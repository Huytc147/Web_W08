<div id="products" class="row row-cols-1 row-cols-md-3 g-4"></div>
<nav class="mt-4">
  <ul class="pagination justify-content-center"></ul>
</nav>

<style>
  .card { display: flex; flex-direction: column; height: 100%; } .card-body {
  flex: 1; } .card-footer { margin-top: auto; } .ratio { width: 100%; height:
  300px; overflow: hidden; display: flex; align-items: center; justify-content:
  center; background: #f5f5f5; } .ratio img { max-width: 100%; max-height: 100%;
  object-fit: contain; } .card-title { overflow: hidden; text-overflow:
  ellipsis; white-space: nowrap; } .card-text { overflow: hidden; text-overflow:
  ellipsis; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient:
  vertical; }
</style>

<script>
  async function loadPage(page) { try { console.log('Loading page:', page);
  const res = await fetch(`/ajax`, { method: 'POST', headers: { 'Content-Type':
  'application/json' }, body: JSON.stringify({ page, pageSize: 3 }) });
  console.log('Response status:', res.status); const data = await res.json();
  console.log('Data received:', data); const productContainer =
  document.getElementById('products'); productContainer.innerHTML = '';
  data.products.forEach(product => { productContainer.innerHTML +=
  createProductCard(product); }); createPagination(data.totalPages, data.page);
  } catch (error) { console.error('Error loading page:', error); } } function
  createProductCard(product) { return ` <div class="col"> <div class="card h-100
  shadow"> <div class="ratio"> <img src="/imgs/p${product.id}.png"
  class="img-card-top" alt="${product.title}"
  onerror="this.src='/imgs/placeholder.png'" /> </div> <div class="card-body
  mt-2"> <h5 class="card-title">${product.title}</h5> <p class="card-text
  mt-3">${product.description}</p> </div> <div class="card-footer text-center">
  <a href="/products/${product.id}" class="btn btn-primary">Xem chi tiáº¿t</a>
  </div> </div> </div> `; } function createPagination(totalPages, currentPage) {
  const paginationContainer = document.querySelector('.pagination');
  paginationContainer.innerHTML = ''; const prevPage = currentPage - 1;
  paginationContainer.innerHTML += ` <li class="page-item ${currentPage > 1 &&
  totalPages > 1 ? '' : 'disabled'}"> <a class="page-link prev-btn" href="#"
  data-page="${prevPage}" aria-label="Previous"> <span
  aria-hidden="true">&laquo;</span> </a> </li> `; for (let i = 1; i <=
  totalPages; i++) { const isActive = i === currentPage ? 'active' : '';
  paginationContainer.innerHTML += ` <li class="page-item ${isActive}"> <a
  class="page-link page-btn" href="#" data-page="${i}">${i}</a> </li> `; } const
  nextPage = currentPage + 1; paginationContainer.innerHTML += ` <li
  class="page-item ${currentPage < totalPages && totalPages > 1 ? '' :
  'disabled'}"> <a class="page-link next-btn" href="#" data-page="${nextPage}"
  aria-label="Next"> <span aria-hidden="true">&raquo;</span> </a> </li> `;
  document.querySelectorAll('.page-btn, .prev-btn, .next-btn').forEach(btn => {
  btn.addEventListener('click', (e) => { e.preventDefault(); const page =
  parseInt(btn.dataset.page); loadPage(page); }); }); } loadPage(1);
</script>